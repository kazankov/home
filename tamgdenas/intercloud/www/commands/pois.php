<?require_once $_SERVER['DOCUMENT_ROOT'].'/modules/command.php';/*** Список POI*/class Pois{	/**	*	поиск POI по заданным критериям 	*   types - список типов (пример -  [51b6f6099f896f981c563abf, 51b999cb1a158adc78000000] )	*	bounds - прмоугольная гео-область, две пары координат широта/долгота: юг/запад, север/восток (пример - [[34.0523600, -118.2435600], [41.8781100, -87.6297900]] )	*/	function get($types, $bounds)	{		global $db;		$poitypes = array();		if($types) 		{			$buf = json_decode($types);			foreach($buf as $iter)			{				$poitypes[]=new MongoId($iter);			}		}		$out = array();		$limit = 10000;		$cursor=null;		$params = array();		if(count($poitypes) > 0)		{			$params = array('types'=>array('$in'=>$poitypes));		}		if($bounds)		{			$params['geoPoint'] = array('$within'=>array('$box'=> json_decode($bounds)));			}		return fixMongoId(iterator_to_array($db->poi->find($params, false)->limit($limit)));	}	}?>